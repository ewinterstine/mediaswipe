/* MediaSwipe - Eric W. v.11.14.2017 */var MediaSwipe=function(){var e,t,i,a,n,o,s,d,r,l,m,c,u,p,w,f,h,v,g,b={},y={},O=window.onresize,x=function(){n=!0,F(r,"on"),h=!1,i.length>1?F(r,"mediaswipe-allow-arrows"):R(r,"mediaswipe-allow-arrows"),j(o),F(document.getElementsByTagName("body")[0],"ms-prevent-scroll")},T=function(){if(W(r,"ms-full-screen"))return S(),!1;n=!1,Q(),R(r,"on"),R(r,"mediaswipe-allow-arrows"),X(),R(document.getElementById("mediaswipe-share-nav"),"on"),R(document.getElementsByTagName("body")[0],"ms-prevent-scroll")},E=function(){s=!0,F(r,"ms-full-screen");var e=document.body,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}},S=function(){s=!1,R(r,"ms-full-screen");var e=document,t=e.exitFullScreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.msExitFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}},j=function(e){i[o].active=!1,i[H(-1)].active=!1,i[H(1)].active=!1,o=e,v.innerHTML=a>1?i[o].displayIndex+" / "+a:"",!1!==i[o].caption&&""!==i[o].caption?(g.innerHTML=i[o].caption,F(g,"on")):R(g,"on");var t=H(-1),n=H(1);if(R(r,"ms-zoom-in"),R(r,"ms-zoom-out"),R(r,"ms-grabbing"),R(r,"ms-grab"),i[o].disableTouchpad&&!W(r,"disable-touchpad")&&"youtube"!==i[o].type?F(r,"disable-touchpad"):!i[o].disableTouchpad&&W(r,"disable-touchpad")?R(r,"disable-touchpad"):"youtube"===i[o].type&&R(r,"disable-touchpad"),void 0!==i[t].youTubeObject&&"function"==typeof i[t].youTubeObject.getPlayerState&&1===i[t].youTubeObject.getPlayerState()&&i[t].youTubeObject.pauseVideo(),void 0!==i[n].youTubeObject&&"function"==typeof i[n].youTubeObject.getPlayerState&&1===i[n].youTubeObject.getPlayerState()&&i[n].youTubeObject.pauseVideo(),!1===h)X(),i[o].domSlide=m,i[o].domContainer=c,L(i[o]),i.length>1&&(i[t].domContainer=p,i[t].domSlide=u,i[n].domContainer=f,i[n].domSlide=w,L(i[t]),L(i[n]));else{if(W(h,"mediaswipe-previous-slide")){s=p;u=w,p=f,w=m,f=c,m=h,c=s,i[t].domContainer=p,i[t].domSlide=u,Y(i[t]),L(i[t]),C(i[n])}else if(W(h,"mediaswipe-next-slide")){var s=f;w=u,f=p,u=m,p=c,m=h,c=s,i[n].domContainer=f,i[n].domSlide=w,Y(i[n]),L(i[n]),C(i[t])}P(0),R(m,"mediaswipe-previous-slide"),R(m,"mediaswipe-next-slide"),F(m,"mediaswipe-current-slide"),R(u,"mediaswipe-current-slide"),R(u,"mediaswipe-next-slide"),F(u,"mediaswipe-previous-slide"),R(w,"mediaswipe-previous-slide"),R(w,"mediaswipe-current-slide"),F(w,"mediaswipe-next-slide")}},I=function(e,t,i){i.style.webkitTransform="translate("+e+"px,"+t+"px)",i.style.MozTransform="translate("+e+"px,"+t+"px)",i.style.msTransform="translate("+e+"px,"+t+"px)",i.style.OTransform="translate("+e+"px,"+t+"px)",i.style.transform="translate("+e+"px,"+t+"px)"},P=function(e){I(e,0,m),I(e,0,u),I(e,0,w)},Y=function(e){e.active=!1,"image"===e.type&&!1!==e.domObject&&void 0!==e.domObject.ignoreOnLoad&&(e.domObject.ignoreOnLoad=!0),R(e.domSlide,"loaded"),e.domContainer.innerHTML=""},X=function(){for(var e=0;e<i.length;e++)i[e].active=!1,"image"===i[e].type&&!1!==i[e].domObject&&void 0!==i[e].domObject.ignoreOnLoad&&(i[e].domObject.ignoreOnLoad=!0);R(m,"loaded"),R(u,"loaded"),R(w,"loaded"),c.innerHTML="",p.innerHTML="",f.innerHTML="",P(0)},L=function(e){if("image"===e.type){var t=new Image;t.ignoreOnLoad=!1,e.active=!0,0===e.width?(t.galleryIndex=e.index,t.parent=e.domSlide,t.onerror=function(){console.warn("MediaSwipe: Could not load "+this.src)},t.onabort=function(){console.warn("MediaSwipe: Could not load "+this.src)},t.onload=function(){!1===this.ignoreOnLoad&&(F(this.parent,"loaded"),i[this.galleryIndex].width=this.naturalWidth||this.width,i[this.galleryIndex].height=this.naturalHeight||this.height,C(i[this.galleryIndex]))},t.src=e.src,t.complete&&(t.ignoreOnLoad=!0,e.domObject=t,F(e.domSlide,"loaded"),i[t.galleryIndex].width=t.naturalWidth||t.width,i[t.galleryIndex].height=t.naturalHeight||t.height,C(i[t.galleryIndex])),e.domContainer.appendChild(t),e.domObject=t):(t.src=e.src,e.domContainer.appendChild(t),e.domObject=t,F(e.domSlide,"loaded"),C(e))}else if("youtube"===e.type){e.active=!0;var a=document.createElement("div");if(a.id="youtube"+e.index,a.style.width=e.width,a.style.height=e.height,e.domContainer.appendChild(a),e.domObject=a,void 0===window.YT){if(void 0===window.mediaSwipeCalledYTAPI){window.mediaSwipeCalledYTAPI=!0;var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}d.push(e)}else M(e)}else if("iframe"===e.type){var s=document.createElement("iframe");s.src=e.src,s.width=e.width,s.height=e.height,s.style.overflow="hidden",s.style.overflowY="scroll",e.domContainer.appendChild(s),e.domObject=s,C(e),F(e.domSlide,"loaded")}},M=function(t){var a=H(-1),n=H(1);if(t.index!==o&&t.index!==a&&t.index!==n)return!1;t.youTubeObject=new YT.Player("youtube"+t.index,{height:t.height,width:t.width,videoId:t.src,playerVars:{modestbranding:!0,rel:!1},events:{onReady:function(t){var a,n=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/,s=t.target.getVideoUrl().match(n);if(s&&11==s[2].length){a=s[2];for(var d=0;d<i.length;d++)a===i[d].src&&(i[d].domObject=document.getElementById("youtube"+i[d].index),C(i[d]),F(i[d].domSlide,"loaded"),1===i.length&&e>1100&&(F(r,"disable-touchpad"),i[d].youTubeObject.playVideo(),"undefined"!=typeof dataLayer&&void 0!==dataLayer.push&&void 0!==i[o].eventName&&""!=typeof i[o].eventName&&dataLayer.push({event:i[o].eventName})))}else console.warn("MediaSwipe: Could not parse YouTube video URL correctly.")}}})},C=function(e){var t=z(e);e.virtualWidth=t.virtualWidth,e.virtualHeight=t.virtualHeight,e.virtualXPos=t.virtualXPos,e.virtualYPos=t.virtualYPos,e.virtualXOffset=0,e.virtualYOffset=0,e.isZoomed=!1,"image"===e.type?(e.scale=t.scale,e.minScale=t.scale,e.xPos=t.xPos,e.yPos=t.yPos,e.domObject.style.width=Math.ceil(e.width+1)+"px",e.domObject.style.height=Math.ceil(e.height+1)+"px"):"iframe"!==e.type&&"youtube"!==e.type||(e.scale=1,e.xPos=t.virtualXPos,e.yPos=t.virtualYPos,e.domObject.width=Math.ceil(t.virtualWidth+1)+"px",e.domObject.height=Math.ceil(t.virtualHeight+1)+"px"),e.domObject.style.position="absolute",e.domObject.style.left=Math.floor(e.xPos)+"px",e.domObject.style.top=Math.floor(e.yPos)+"px",B(e)},z=function(t){var i,a,n,o,s,d,r=e>799?80:10,l=t.domContainer,m=t.width||t.videoWidth||t.offsetWidth,c=t.height||t.videoHeight||t.offsetHeight,u=m/c,p=l.offsetWidth-2*r,w=l.offsetHeight-2*r,f=p/w;return m>p||c>w?u>f?(n=-(m-(i=p)-2*r)/2,o=(w-c+2*r)/2,s=r,d=.5*(w-(a=p/u))+r):(n=(p-m+2*r)/2,o=-(c-(a=w)-2*r)/2,s=.5*(p-(i=w*u))+r,d=r):(i=m,a=c,s=n=.5*(p-m)+r,d=o=.5*(w-c)+r),{xPos:n,yPos:o,virtualWidth:i,virtualHeight:a,virtualXPos:s,virtualYPos:d,scale:i/m}},B=function(i,a,n,o){var s;if(void 0!==i.minScale&&(!1!==a&&a<i.minScale?a=i.minScale:!1!==a&&a>1.3&&(a=1.3)),void 0!==a){a=a||i.scale||1,n=n||0,n+=i.lastVirtualXOffset||0,o=o||0,o+=i.lastVirtualYOffset||0;i.isZoomed&&i.virtualXOffset>n&&i.virtualXOffset+i.virtualXPos<0&&i.virtualXOffset+i.virtualXPos+i.virtualWidth<e-80?n=i.virtualXOffset:i.isZoomed&&i.virtualXOffset<n&&i.virtualXOffset+i.virtualXPos>80&&i.virtualXOffset+i.virtualXPos+i.virtualWidth>e&&(n=i.virtualXOffset),i.isZoomed&&i.virtualYOffset>o&&i.virtualYOffset+i.virtualYPos<0&&i.virtualYOffset+i.virtualYPos+i.virtualHeight<t-80?o=i.virtualYOffset:i.isZoomed&&i.virtualYOffset<o&&i.virtualYOffset+i.virtualYPos>80&&i.virtualYOffset+i.virtualYPos+i.virtualHeight>t&&(o=i.virtualYOffset),s="translate("+n+"px,"+o+"px) scale("+a+")",void 0!==i.domObject&&(i.scale=a,i.virtualXOffset=n,i.virtualYOffset=o,i.virtualWidth=i.width*a,i.virtualHeight=i.height*a,i.virtualXPos=i.xPos+(i.width-i.virtualWidth)/2,i.virtualYPos=i.yPos+(i.height-i.virtualHeight)/2)}else s="translate("+i.virtualXOffset+"px,"+i.virtualYOffset+"px) scale("+i.scale+")";void 0!==i.domObject?(i.domObject.style.webkitTransform=s,i.domObject.style.MozTransform=s,i.domObject.style.msTransform=s,i.domObject.style.OTransform=s,i.domObject.style.transform=s):(i.style.webkitTransform=s,i.style.MozTransform=s,i.style.msTransform=s,i.style.OTransform=s,i.style.transform=s)},k=function(e){var t,n=[],s=N(e),d=document.getElementsByClassName("js-mediaSwipe"),r=document.getElementsByClassName("js-mediaswipe");i=new Array;var l=new Array;if(o=0,d.length)for(u=0;u<d.length;u++)t=N(d[u]),(!1===s&&!1!==t&&void 0===n[t.src]||!1!==t&&void 0===n[t.src]&&t.category===s.category)&&(n[t.src]=!0,t.index=i.length,t.displayIndex=i.length+1,i.push(t),l.push(t),0===o&&t.src===s.src&&(o=i.length-1));if(r.length)for(u=0;u<r.length;u++)t=N(r[u]),(!1===s&&!1!==t&&void 0===n[t.src]||!1!==t&&void 0===n[t.src]&&t.category===s.category)&&(n[t.src]=!0,t.index=i.length,t.displayIndex=i.length+1,i.push(t),l.push(t),0===o&&t.src===s.src&&(o=i.length-1));if(2===i.length){var m=i.length,c=1;if(d.length)for(u=0;u<d.length;u++)t=N(d[u]),(!1===s&&!1!==t||!1!==t&&t.category===s.category)&&(t.index=m,t.displayIndex=c,i.push(t),m++,c++);if(r.length)for(var u=0;u<r.length;u++)t=N(d[u]),(!1===s&&!1!==t||!1!==t&&t.category===s.category)&&(t.index=m,t.displayIndex=c,i.push(t),m++,c++);a=2}else a=i.length},A=function(t,i){b.animations.length&&(j(o),Q());var a=t<0?u:w;h=a,o=H(t),b.animations.push({domObject:m,time:270,xStart:i,xEnd:e*t*-1,callback:function(){j(o),Q()}}),b.animations.push({domObject:a,time:270,xStart:i,xEnd:e*t*-1})},N=function(e){for(var t="",i="",a={active:!1,index:0,type:!1,src:!1,caption:!1,category:!1,width:0,height:0,xPos:0,yPos:0,scale:1,minScale:1,isZoomed:!1,disableTouchpad:!1,virtualHeight:0,virtualWidth:0,virtualXPos:0,virtualYPos:0,virtualXOffset:0,virtualYOffset:0,lastVirtualXOffset:0,lastVirtualYOffset:0,domSlide:!1,domContainer:!1,domObject:!1},n=0;n<e.attributes.length;n++)t=e.attributes[n].nodeName,i=e.getAttribute(t),"data-largeimg"===t||"data-img"===t||"data-image"===t||"href"===t?a.src=i:"data-caption"===t||"data-title"===t||"data-description"===t?a.caption=i:"data-rel"===t||"data-category"===t||"data-type"===t?a.category=i:"data-w"!==t&&"data-width"!==t||isNaN(i)?"data-h"!==t&&"data-height"!==t||isNaN(i)||(a.height=parseInt(i)):a.width=parseInt(i);if(!1!==a.src&&""!==a.src){if(/\.(jpg|png|gif)$/.test(a.src.toLowerCase())&&void 0===a.mmid)a.type="image";else if(/\.(mp4)$/.test(a.src.toLowerCase()))a.type="mp4";else if(a.src.indexOf("youtube.com")>-1||a.src.indexOf("/embed/")>-1){a.type="youtube",a.disableTouchpad=!0,a.width=a.width||1200,a.height=a.height||675;var o=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/,s=a.src.match(o);if(!s||11!=s[2].length)return!1;a.src=s[7]}else a.type="iframe",a.disableTouchpad=!0,a.width=a.width||920,a.height=a.height||614;return a}return console.warn("MediaSwipe: Could not open file because 'href' or 'data-image' attributes were not specified on the js-mediaSwipe element."),!1},H=function(e){var t=o+e;return t>=i.length?0:t<0?i.length-1:t},F=function(e,t){e.className=e.className.replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ")+" "+t},R=function(e,t){e.className=e.className.replace(new RegExp(t,"g"),"").replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ")},W=function(e,t){for(var i=e.className.replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ").split(" "),a=0;a<i.length;a++)if(i[a]===t)return!0;return!1},V=function(e,t){return!(!e.getAttribute("class")||void 0===e.getAttribute("class")||-1===e.getAttribute("class").toLowerCase().indexOf("js-mediaswipe"))&&(t.preventDefault(),k(e),x(),!0)},q=function(){var e=document.createElement("div");e.id="mediaswipe-container";var t="";t+='<div id="mediaswipe-touchpad" class="mediaswipe-slides-container">',t+='<div id="mediaswipe-slide1" class="mediaswipe-slide mediaswipe-current-slide">',t+='<div id="mediaswipe-slide1-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div>',t+="</div>",t+='<div id="mediaswipe-slide2" class="mediaswipe-slide mediaswipe-previous-slide">',t+='<div id="mediaswipe-slide2-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div>',t+="</div>",t+='<div id="mediaswipe-slide3" class="mediaswipe-slide mediaswipe-next-slide">',t+='<div id="mediaswipe-slide3-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div>',t+="</div>",t+='<div class="mediaswipe-invisible-overlay"></div>',t+="</div>",t+='<div class="mediaswipe-top-bar">',t+='<div id="mediaswipe-gallery-indexes"></div>',t+='<button type="button" id="mediaswipe-share-button" class="mediaswipe-share-button mediaswipe-op-transition" title="Share"><span></span></button>',t+='<button type="button" id="mediaswipe-fullscreen-button" class="mediaswipe-fullscreen-button mediaswipe-op-transition"><span></span></button>',t+='<button type="button" id="mediaswipe-close-button" class="mediaswipe-close-button mediaswipe-op-transition"></button>',t+='<div id="mediaswipe-share-nav">',t+='<button type="button" id="mediaswipe-facebook-share" class="mediaswipe-op-transition">Share on Facebook</button>',t+='<button type="button" id="mediaswipe-twitter-share" class="mediaswipe-op-transition">Tweet</button>',t+='<button type="button" id="mediaswipe-pinterest-share" class="mediaswipe-op-transition">Pin it</button>',t+="</div>",t+="</div>",t+='<div class="mediaswipe-bottom-bar">',t+='<div id="mediaswipe-slide-caption"></div>',t+="</div>",t+='<button type="button" id="mediaswipe-left-arrow" class="mediaswipe-arrow mediaswipe-left-arrow mediaswipe-all-transition"><span></span></button>',t+='<button type="button" id="mediaswipe-right-arrow" class="mediaswipe-arrow mediaswipe-right-arrow mediaswipe-all-transition"><span></span></button>',t+='<div class="mediaswipe-overlay mediaswipe-op-transition"></div>',e.innerHTML=t,document.getElementsByTagName("body")[0].appendChild(e)},D=function(){document.addEventListener("click",function(e){if(!1===n&&void 0!==e.button&&e.button<2||!1===n&&void 0===e.button)for(var t=e.target;t.parentNode&&!V(t,e);)t=t.parentNode}),document.addEventListener("mouseout",function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||!y.mouseDown||K(e)}),l.addEventListener("mouseout",function(e){(y.swiping||y.panning)&&(e=e||window.event,K(e))}),l.addEventListener("touchstart",function(e){e=e||window.event,n&&e.preventDefault(),1===e.targetTouches.length?$(e.targetTouches[0]):(y.zooming=!1,$(e.targetTouches[0]),U(e.targetTouches[1],y.secondStart))}),l.addEventListener("touchmove",function(e){if(e=e||window.event,n&&e.preventDefault(),1!==e.targetTouches.length||y.zooming){if(e.targetTouches.length>=1&&!1===i[o].disableTouchpad){!0!==y.zooming&&(U(e.targetTouches[0],y.start),y.zooming=!0,i[o].startZoomWidth=i[o].virtualWidth,i[o].isZoomed=!0,i[o].lastVirtualXOffset=i[o].virtualXOffset,i[o].lastVirtualYOffset=i[o].virtualYOffset),U(e.targetTouches[0],y.end),U(e.targetTouches[1],y.secondEnd);var t=Math.sqrt(Math.pow(y.secondStart.y-y.start.y,2)+Math.pow(y.secondStart.x-y.start.x,2)),a=Math.sqrt(Math.pow(y.secondEnd.y-y.end.y,2)+Math.pow(y.secondEnd.x-y.end.x,2)),s=y.secondEnd.x-y.secondStart.x+(y.end.x-y.start.x)/2,d=y.secondEnd.y-y.secondEnd.y+(y.end.y-y.start.y)/2,r=(4*(a-t)+i[o].startZoomWidth)/i[o].width;B(i[o],r,s,d)}}else _(e.targetTouches[0])}),l.addEventListener("touchend",function(e){e=e||window.event,n&&e.preventDefault(),0===e.targetTouches.length&&!1===y.zooming?K(e.changedTouches[0]):0===e.targetTouches.length&&y.zooming?y.zooming=!1:1===e.targetTouches.length&&y.zooming&&($(e.targetTouches[0]),i[o].lastVirtualXOffset=i[o].virtualXOffset,i[o].lastVirtualYOffset=i[o].virtualYOffset)}),l.addEventListener("mousedown",function(e){e=e||window.event,$(e)}),l.addEventListener("mouseup",function(e){e=e||window.event,K(e)}),l.addEventListener("mousemove",function(e){e=e||window.event,_(e)}),document.getElementById("mediaswipe-close-button").addEventListener("click",function(e){(e=e||window.event).preventDefault(),T()}),document.getElementById("mediaswipe-fullscreen-button").addEventListener("click",function(e){(e=e||window.event).preventDefault(),W(r,"ms-full-screen")?S():E()}),document.getElementById("mediaswipe-share-button").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=document.getElementById("mediaswipe-share-nav");W(t,"on")?R(t,"on"):F(t,"on")}),document.getElementById("mediaswipe-facebook-share").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=i[o].domObject.src,a=i[o].caption||"";return window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(t)+"&t="+encodeURIComponent(a),"sharer","toolbar=0,status=0,width=626,height=436"),R(document.getElementById("mediaswipe-share-nav"),"on"),!1}),document.getElementById("mediaswipe-twitter-share").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=i[o].domObject.src,a=i[o].caption||"";return window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(a)+"&url="+encodeURIComponent(t),"sharer","toolbar=0,status=0,width=626,height=436"),R(document.getElementById("mediaswipe-share-nav"),"on"),!1}),document.getElementById("mediaswipe-pinterest-share").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=i[o].domObject.src,a=i[o].caption||"";return window.open("http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(t)+"&description="+encodeURIComponent(a),"sharer","toolbar=0,status=0,width=626,height=436"),R(document.getElementById("mediaswipe-share-nav"),"on"),!1}),document.getElementById("mediaswipe-left-arrow").addEventListener("click",function(e){(e=e||window.event).preventDefault(),n&&a>1&&A(-1,0)}),document.getElementById("mediaswipe-right-arrow").addEventListener("click",function(e){(e=e||window.event).preventDefault(),n&&a>1&&A(1,0)}),document.onkeydown=function(e){if(n)switch((e=e||window.event).which||e.keyCode){case 39:a>1&&A(1,0);break;case 37:a>1&&A(-1,0);break;case 27:T()}},window.onresize=function(){Z()}},Z=function(){if(e=window.innerWidth,t=window.innerHeight,n)for(var a=H(-1),s=H(1),d=[o,a,s],r=0;r<d.length&&(C(i[d[r]]),!(i.length<2));r++);"function"==typeof O&&O()},U=function(e,t){t.x=e.clientX,t.y=e.clientY,t.time=parseInt((new Date).getTime())},$=function(e){n&&(U(e,y.start),y.mouseDown=!0)},K=function(e){if(n)if(y.mouseDown=!1,U(e,y.end),y.swiping){t=y.end.x-y.start.x;if(Math.abs(t)>100)A(t>0?-1:1,t);else{a=t>0?u:w;b.animations.push({domObject:m,time:270,xStart:t,xEnd:0,callback:function(){Q(),R(r,"ms-grabbing"),R(r,"ms-grab")}}),b.animations.push({domObject:a,time:270,xStart:t,xEnd:0})}y.swiping=!1}else if(y.panning){if(y.panning=!1,R(r,"ms-grabbing"),F(r,"ms-zoom-out"),Math.abs(y.vX)>25&&i.length>1){y.panning=!1;var t=y.end.x-y.start.x;if(Math.abs(t)>100)A(t>0?-1:1,t);else{var a=t>0?u:w;b.animations.push({domObject:m,time:270,xStart:t,xEnd:0,callback:function(){Q(),R(r,"ms-grabbing"),R(r,"ms-grab")}}),b.animations.push({domObject:a,time:270,xStart:t,xEnd:0})}}else(Math.abs(y.vX)>8||Math.abs(y.vY)>8)&&b.animations.push({domObject:i[o],time:330,xStart:0,xEnd:6*y.vX,yStart:0,yEnd:6*y.vY,callback:function(){Q(),R(r,"ms-grabbing"),R(r,"ms-grab"),i[o].lastVirtualXOffset=i[o].virtualXOffset,i[o].lastVirtualYOffset=i[o].virtualYOffset}});i[o].lastVirtualXOffset=i[o].virtualXOffset,i[o].lastVirtualYOffset=i[o].virtualYOffset}else{var s=G(e),d=document.getElementById("mediaswipe-share-nav");if(W(d,"on")&&(R(d,"on"),!s))return!1;if(s||T(),s&&void 0!==i[o].youTubeObject&&1!==i[o].youTubeObject.getPlayerState()&&(F(r,"disable-touchpad"),i[o].youTubeObject.playVideo()),s&&i[o].scale<1&&!1===i[o].isZoomed&&!1===i[o].disableTouchpad&&b.animations.push({domObject:i[o],time:170,scaleStart:i[o].scale,scaleEnd:1,callback:function(){Q(),R(r,"ms-zoom-in"),F(r,"ms-zoom-out"),i[o].isZoomed=!0}}),s&&!0===i[o].isZoomed){var l=z(i[o]);i[o].lastVirtualXOffset=0,i[o].lastVirtualYOffset=0,b.animations.push({domObject:i[o],time:170,scaleStart:i[o].scale,scaleEnd:l.scale,xStart:i[o].virtualXOffset,xEnd:0,yStart:i[o].virtualYOffset,yEnd:0,callback:function(){Q(),R(r,"ms-zoom-out"),F(r,"ms-zoom-in"),i[o].isZoomed=!1}})}}},_=function(e){if(n)if(y.mouseDown){if(Math.sqrt(Math.pow(e.clientY-y.start.y,2)+Math.pow(e.clientX-y.start.x,2))>10)if(i.length>1&&!1===y.swiping&&!1===i[o].isZoomed?y.swiping=!0:!0===i[o].isZoomed&&(y.panning=!0),y.swiping)P(e.clientX-y.start.x),W(r,"ms-grab")&&R(r,"ms-grab"),W(r,"ms-grabbing")||F(r,"ms-grabbing");else if(y.panning){var t={x:0,y:0,time:-1};U(e,t),y.vX=t.x-y.lastPosition.x,y.vY=t.y-y.lastPosition.y,y.lastPosition=t,B(i[o],!1,t.x-y.start.x,t.y-y.start.y),W(r,"ms-zoom-out")&&R(r,"ms-zoom-out"),W(r,"ms-grabbing")||F(r,"ms-grabbing")}}else G(e)?i[o].scale<1&&!1===i[o].disableTouchpad&&!W(r,"ms-zoom-in")?F(r,"ms-zoom-in"):i[o].scale>=1&&!1===i[o].disableTouchpad&&i[o].isZoomed&&!W(r,"ms-zoom-out")?F(r,"ms-zoom-out"):a>1&&1===i[o].scale&&!i[o].disableTouchpad&&!i[o].isZoomed&&!W(r,"ms-grab")&&F(r,"ms-grab"):(W(r,"ms-zoom-in")&&R(r,"ms-zoom-in"),W(r,"ms-zoom-out")&&R(r,"ms-zoom-out"),W(r,"ms-grab")&&R(r,"ms-grab"))},G=function(e){var t={x:0,y:0,time:0};return U(e,t),t.x>=i[o].virtualXPos+i[o].virtualXOffset&&t.x<=i[o].virtualXPos+i[o].virtualXOffset+i[o].virtualWidth&&t.y>=i[o].virtualYPos+i[o].virtualYOffset&&t.y<=i[o].virtualYPos+i[o].virtualYOffset+i[o].virtualHeight},J=function(){return parseInt((new Date).getTime())},Q=function(){b.animations=new Array},ee=function(){b.currentTime=J(),b.deltaTime=b.currentTime-b.previousTime;for(var e=0;e<b.animations.length;e++)if(void 0===b.animations[e].animating&&(b.animations[e].animating=!0),b.animations[e].animating){b.foundAnimation=!0,void 0===b.animations[e].deltaTime&&(b.animations[e].deltaTime=0),void 0===b.animations[e].scaleStart&&(b.animations[e].scaleStart=!1,b.animations[e].scaleEnd=!1),void 0===b.animations[e].xStart&&(b.animations[e].xStart=!1,b.animations[e].xEnd=!1),void 0===b.animations[e].yStart&&(b.animations[e].yStart=!1,b.animations[e].yEnd=!1);var t,i,a;b.animations[e].deltaTime,b.animations[e].time;b.animations[e].deltaTime>b.animations[e].time?(b.animations[e].animating=!1,1,t=!1!==b.animations[e].scaleStart&&b.animations[e].scaleEnd,i=!1!==b.animations[e].xStart&&b.animations[e].xEnd,a=!1!==b.animations[e].yStart&&b.animations[e].yEnd):(t=!1!==b.animations[e].scaleStart&&ie(b.animations[e].deltaTime,b.animations[e].scaleStart,b.animations[e].scaleEnd-b.animations[e].scaleStart,b.animations[e].time),i=!1!==b.animations[e].xStart&&ie(b.animations[e].deltaTime,b.animations[e].xStart,b.animations[e].xEnd-b.animations[e].xStart,b.animations[e].time),a=!1!==b.animations[e].yStart&&ie(b.animations[e].deltaTime,b.animations[e].yStart,b.animations[e].yEnd-b.animations[e].yStart,b.animations[e].time)),B(b.animations[e].domObject,t,i,a),b.animations[e].deltaTime>b.animations[e].time&&void 0!==b.animations[e].callback?b.animations[e].callback():b.animations[e].deltaTime+=b.deltaTime}b.previousTime=b.currentTime,b.foundAnimation=!1,te()},te=function(){window.requestAnimationFrame?window.requestAnimationFrame(ee):window.msRequestAnimationFrame?window.msRequestAnimationFrame(ee):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(ee):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(ee):window.oRequestAnimationFrame?window.oRequestAnimationFrame(ee):void 0===window.requestNextFrame&&(window.requestNextFrame=setInterval(function(){ee()},18))},ie=function(e,t,i,a){return e/=a,-i*e*(e-2)+t};return{init:function(){if(e=window.innerWidth,t=window.innerHeight,s=!1,n=!1,d=[],(r=document.getElementById("mediaswipe-container"))||(q(),r=document.getElementById("mediaswipe-container")),l=document.getElementById("mediaswipe-touchpad"),m=document.getElementById("mediaswipe-slide1"),c=document.getElementById("mediaswipe-slide1-container"),u=document.getElementById("mediaswipe-slide2"),p=document.getElementById("mediaswipe-slide2-container"),w=document.getElementById("mediaswipe-slide3"),f=document.getElementById("mediaswipe-slide3-container"),h=!1,v=document.getElementById("mediaswipe-gallery-indexes"),g=document.getElementById("mediaswipe-slide-caption"),b={currentTime:0,previousTime:J(),deltaTime:0,animations:[],foundAnimation:!1},y={vX:0,vY:0,start:{x:0,y:0,time:-1},end:{x:0,y:0,time:-1},secondStart:{x:0,y:0,time:-1},secondEnd:{x:0,y:0,time:-1},lastPosition:{x:0,y:0,time:-1},mouseDown:!1,swiping:!1,panning:!1,zooming:!1},D(),ee(),window.location&&window.location.hash&&window.location.hash.length>0&&/\#view\=([\w\d])+(\,[\w\d])*/.test(window.location.hash)){var i=0,a="",o=window.location.hash.replace("#view=","").split(",");a=o[0],2!==o.length||""===o[1]||isNaN(o[1])||(i=parseInt(o[1]));for(var O=document.getElementsByClassName("js-mediaSwipe"),T=-1,E=0;E<O.length;E++)if(void 0!==O[E].getAttribute("data-rel")&&O[E].getAttribute("data-rel")===a&&++T===i){k(O[E]),x();break}T<0&&console.warn("MediaSwipe: Could not find gallery or image in the fragment identifier.")}},youTubeAPIReady:function(){for(var e=0;e<d.length;e++)"youtube"===d[e].type&&M(d[e])}}}();MediaSwipe.init(),window.onYouTubeIframeAPIReady=function(){MediaSwipe.youTubeAPIReady()};
