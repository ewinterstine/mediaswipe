/*	MediaSwipe
Copyright (C) 2018  Eric J. Winterstine
The JavaScript code in this page is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License (GNU GPL) as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.  The code is distributed WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
As additional permission under GNU GPL version 3 section 7, you may distribute non-source (e.g., minimized or compacted) forms of that code without the copy of the GNU GPL normally required by section 4, provided you include this license notice and a URL through which recipients can access the Corresponding Source.   */
if(void 0===mediaswipe)var mediaswipe={};var MSoldYouTubeIframeAPIReady;mediaswipe=function(){var s,f,m,c,d,u,o,r,l,p,h,v,w,y,g,b,x,O,S,E,T,I=!1,j={},C={},P=(window.onresize,function(e){V(document.getElementsByTagName("body")[0],"ms-prevent-scroll"),o=void 0!==e&&e,d=!0,V(p,"on"),O=!1,1<m.length?V(p,"mediaswipe-allow-arrows"):q(p,"mediaswipe-allow-arrows"),a(u),!1!==m[u].animate&&("fade-down"===m[u].animate?j.animations.push({domObject:v,time:400,yStart:-100,yEnd:0,opacityStart:0,opacityEnd:1,callback:function(){ee()}}):"fade-right"===m[u].animate?j.animations.push({domObject:v,time:400,xStart:-100,xEnd:0,opacityStart:0,opacityEnd:1,callback:function(){ee()}}):"fade-left"===m[u].animate?j.animations.push({domObject:v,time:400,xStart:100,xEnd:0,opacityStart:0,opacityEnd:1,callback:function(){ee()}}):j.animations.push({domObject:v,time:400,yStart:100,yEnd:0,opacityStart:0,opacityEnd:1,callback:function(){ee()}}))}),Y=function(e){var t,i=void 0!==e.gallery?e.gallery:[e];m=new Array,u=void 0!==e.currentIndex?e.currentIndex:0,t=F;for(var a=0;a<i.length;a++)t=F(i[a]),void 0===i[a].category&&(t.category="723554093"),"function"==typeof e.onClose&&(t.onClose=e.onClose),"function"==typeof i[a].onClose&&(t.onClose=i[a].onClose),"function"==typeof i[a].onReady&&(t.onReady=i[a].onReady),t.index=a,t.displayIndex=a+1,m.push(t);if(2===m.length){var n={},o={};for(var s in m[0])n[s]=m[0][s];for(var s in n.displayIndex=1,n.index=2,m.push(n),m[1])o[s]=m[1][s];o.displayIndex=2,o.index=3,m.push(o),c=2}else c=m.length;P(!0),"function"==typeof e.onReady&&1<m.length&&e.onReady()},X=function(){if(Z(p,"ms-full-screen"))return t(),!1;!1!==m[u].addClass&&q(p,m[u].addClass),"function"==typeof m[u].onClose&&m[u].onClose(),history.replaceState(void 0,void 0,"#"),d=!1,ee(),q(p,"on"),q(p,"mediaswipe-allow-arrows"),A(),q(document.getElementById("mediaswipe-share-nav"),"on"),q(document.getElementsByTagName("body")[0],"ms-prevent-scroll")},t=function(){!1,q(p,"ms-full-screen");var e=document,t=e.exitFullScreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.msExitFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}},a=function(e){!1!==m[u].addClass&&q(p,m[u].addClass),!1!==m[D(-1)].addClass&&q(p,m[D(-1)].addClass),!1!==m[D(1)].addClass&&q(p,m[D(1)].addClass),q(p,"ms-zoom-in"),q(p,"ms-zoom-out"),q(p,"ms-grabbing"),q(p,"ms-grab"),m[u].active=!1,m[D(-1)].active=!1;var t=(m[D(1)].active=!1)===m[u=e].category?"":m[u].category;0==o&&(1<m.length?history.replaceState(void 0,void 0,"#view="+t+","+(m[u].displayIndex-1)):history.replaceState(void 0,void 0,"#view="+t)),S.innerHTML=1<c?m[u].displayIndex+" / "+c:"",1<c?V(S,"on"):q(S,"on"),!1!==m[u].caption&&""!==m[u].caption?(E.innerHTML=m[u].caption,V(E,"on")):q(E,"on");var i=D(-1),a=D(1);if(m[u].disableTouchpad&&!Z(p,"disable-touchpad")&&"youtube"!==m[u].type?V(p,"disable-touchpad"):!m[u].disableTouchpad&&Z(p,"disable-touchpad")?q(p,"disable-touchpad"):"youtube"===m[u].type&&q(p,"disable-touchpad"),!1!==m[u].addClass&&V(p,m[u].addClass),void 0!==m[i].youTubeObject&&"function"==typeof m[i].youTubeObject.getPlayerState&&1===m[i].youTubeObject.getPlayerState()&&m[i].youTubeObject.pauseVideo(),void 0!==m[a].youTubeObject&&"function"==typeof m[a].youTubeObject.getPlayerState&&1===m[a].youTubeObject.getPlayerState()&&m[a].youTubeObject.pauseVideo(),!1===O)A(),m[u].domSlide=v,m[u].domContainer=w,"siteplan"!==m[u].type&&"interactive"!==m[u].type&&R(m[u]),1<m.length&&(m[i].domContainer=g,m[i].domSlide=y,m[a].domContainer=x,m[a].domSlide=b,R(m[i]),R(m[a]));else{if(Z(O,"mediaswipe-previous-slide")){var n=g;y=b,g=x,b=v,x=w,v=O,w=n,m[i].domContainer=g,m[i].domSlide=y,M(m[i]),R(m[i]),z(m[a])}else if(Z(O,"mediaswipe-next-slide")){n=x;b=y,x=g,y=v,g=w,v=O,w=n,m[a].domContainer=x,m[a].domSlide=b,M(m[a]),R(m[a]),z(m[i])}L(0),q(v,"mediaswipe-previous-slide"),q(v,"mediaswipe-next-slide"),V(v,"mediaswipe-current-slide"),q(y,"mediaswipe-current-slide"),q(y,"mediaswipe-next-slide"),V(y,"mediaswipe-previous-slide"),q(b,"mediaswipe-previous-slide"),q(b,"mediaswipe-current-slide"),V(b,"mediaswipe-next-slide")}"siteplan"!==m[u].type&&"interactive"!==m[u].type||R(m[u]),"function"==typeof m[u].onReady&&m[u].onReady(m[u])},i=function(e,t,i){i.style.webkitTransform="translate("+e+"px,"+t+"px)",i.style.MozTransform="translate("+e+"px,"+t+"px)",i.style.msTransform="translate("+e+"px,"+t+"px)",i.style.OTransform="translate("+e+"px,"+t+"px)",i.style.transform="translate("+e+"px,"+t+"px)"},L=function(e){i(e,0,v),i(e,0,y),i(e,0,b)},M=function(e){e.active=!1,"image"===e.type&&!1!==e.domObject&&void 0!==e.domObject.ignoreOnLoad&&(e.domObject.ignoreOnLoad=!0),q(e.domSlide,"loaded"),e.domContainer.innerHTML=""},A=function(){for(var e=0;e<m.length;e++)m[e].active=!1,"image"===m[e].type&&!1!==m[e].domObject&&void 0!==m[e].domObject.ignoreOnLoad&&(m[e].domObject.ignoreOnLoad=!0);q(v,"loaded"),q(y,"loaded"),q(b,"loaded"),w.innerHTML="",g.innerHTML="",x.innerHTML="",L(0)},R=function(e){if("html"===e.type){""===e.html&&(e.html=e.src.innerHTML);var t=e.html;(a=document.createElement("div")).innerHTML='<div class="mediaswipe-html-inner-container">'+t+"</div>",a.width=e.width,a.height=e.height,a.style.overflow="hidden",a.style.overflowY="scroll",a.className="mediaswipe-html-container",e.domContainer.appendChild(a),e.domObject=a,z(e),V(e.domSlide,"loaded")}else if("image"===e.type){var i=new Image;i.ignoreOnLoad=!1,e.active=!0,0===e.width?(i.galleryIndex=e.index,i.parent=e.domSlide,i.onerror=function(){console.warn("MediaSwipe: Could not load "+this.src)},i.onabort=function(){console.warn("MediaSwipe: Could not load "+this.src)},i.onload=function(){!1===this.ignoreOnLoad&&(V(this.parent,"loaded"),m[this.galleryIndex].width=this.naturalWidth||this.width,m[this.galleryIndex].height=this.naturalHeight||this.height,z(m[this.galleryIndex]))},i.src=e.src,i.complete&&(i.ignoreOnLoad=!0,e.domObject=i,V(e.domSlide,"loaded"),m[i.galleryIndex].width=i.naturalWidth||i.width,m[i.galleryIndex].height=i.naturalHeight||i.height,z(m[i.galleryIndex])),e.domContainer.appendChild(i),e.domObject=i):(i.src=e.src,e.domContainer.appendChild(i),e.domObject=i,V(e.domSlide,"loaded"),z(e))}else if("youtube"===e.type){var a;if(e.active=!0,(a=document.createElement("div")).id="youtube"+e.index,a.style.width=e.width,a.style.height=e.height,e.domContainer.appendChild(a),e.domObject=a,void 0===window.YT){if(void 0===window.mediaSwipeCalledYTAPI){window.mediaSwipeCalledYTAPI=!0;var n=document.createElement("script");n.src="//www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}l.push(e)}else k(e)}else if("iframe"===e.type){var s=document.createElement("iframe");s.src=e.src,s.width=e.width,s.height=e.height,s.setAttribute("allowfullscreen","allowfullscreen"),s.style.overflow="hidden",s.style.overflowY="scroll",e.domContainer.appendChild(s),e.domObject=s,z(e),V(e.domSlide,"loaded")}},k=function(e){var t=D(-1),i=D(1);if(e.index!==u&&e.index!==t&&e.index!==i)return!1;e.youTubeObject=new YT.Player("youtube"+e.index,{height:e.height,width:e.width,videoId:e.src,playerVars:{modestbranding:!0,rel:0},events:{onReady:function(e){var t,i=e.target.getVideoUrl().match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/),a=D(-1),n=D(1);if(i&&11==i[2].length){t=i[2];for(var o=0;o<m.length;o++)t!==m[o].src||m[o].index!=u&&m[o].index!=a&&m[o].index!=n||(m[o].domObject=document.getElementById("youtube"+m[o].index),null==m[o].domObject&&(R(m[o]),m[o].domObject=document.getElementById("youtube"+m[o].index)),z(m[o]),V(m[o].domSlide,"loaded"),1===m.length&&1100<s&&(V(p,"disable-touchpad"),m[o].youTubeObject.playVideo(),"undefined"!=typeof dataLayer&&void 0!==dataLayer.push&&void 0!==m[u].eventName&&""!=typeof m[u].eventName&&dataLayer.push({event:m[u].eventName})))}else console.warn("MediaSwipe: Could not parse YouTube video URL correctly.")}}})},z=function(e){var t=B(e);e.virtualWidth=t.virtualWidth,e.virtualHeight=t.virtualHeight,e.virtualXPos=t.virtualXPos,e.virtualYPos=t.virtualYPos,e.virtualXOffset=0,e.virtualYOffset=0,e.isZoomed=!1,"image"===e.type?(e.scale=t.scale,e.minScale=t.scale,e.xPos=t.xPos,e.yPos=t.yPos,e.domObject.style.width=Math.ceil(e.width+1)+"px",e.domObject.style.height=Math.ceil(e.height+1)+"px"):"iframe"===e.type||"youtube"===e.type?(e.scale=1,e.xPos=t.virtualXPos,e.yPos=t.virtualYPos,e.domObject.width=Math.ceil(t.virtualWidth+1)+"px",e.domObject.height=Math.ceil(t.virtualHeight+1)+"px"):"html"===e.type&&(e.scale=1,e.xPos=t.virtualXPos,e.yPos=t.virtualYPos,e.domObject.style.width=Math.ceil(t.virtualWidth+1)+"px",e.domObject.style.height=Math.ceil(t.virtualHeight+1)+"px"),void 0!==e.domObject.style&&(e.domObject.style.position="absolute",e.domObject.style.left=Math.floor(e.xPos)+"px",e.domObject.style.top=Math.floor(e.yPos)+"px"),N(e),!1!==e.closeInFrame?(T.style.right="auto",T.style.left=Math.ceil(t.virtualXPos+t.virtualWidth-T.offsetWidth)+"px",T.style.top=Math.ceil(t.virtualYPos)+"px"):T.removeAttribute("style")},B=function(e){var t,i,a,n,o,s,d=e.domContainer,r=e.width||e.videoWidth||e.offsetWidth,l=e.height||e.videoHeight||e.offsetHeight,m=r/l,c=d.offsetWidth-0,u=f-0,p=c/u;return"html"===e.type&&(u-100<(i=e.domObject.children[0].offsetHeight)&&(i=f-100),l=i,c-50<(t=r)&&(t=c-50),r=t),!0===e.fullscreen&&"image"!==e.type&&(t=e.domContainer.width||e.domContainer.videoWidth||e.domContainer.offsetWidth,r=e.domContainer.width||e.domContainer.videoWidth||e.domContainer.offsetWidth,i=e.domContainer.height||e.domContainer.videoHeight||e.domContainer.offsetHeight,l=e.domContainer.height||e.domContainer.videoHeight||e.domContainer.offsetHeight),c<r||u<l?p<m?(a=-(r-(t=c)-0)/2,n=(u-l+0)/2,s=.5*(u-(i=c/m))+(o=0)):(a=(c-r+0)/2,n=-(l-(i=u)-0)/2,o=.5*(c-(t=u*m))+0,s=0):(o=a=.5*(c-(t=r))+0,s=n=.5*(u-(i=l))+0),{xPos:a,yPos:n,virtualWidth:t,virtualHeight:i,virtualXPos:o,virtualYPos:s,scale:t/r}},N=function(e,t,i,a,n){var o;if(void 0!==e.minScale&&(!1!==t&&t<e.minScale?t=e.minScale:!1!==t&&1.3<t&&(t=1.3)),void 0!==t){t=t||e.scale||1,i=i||0,i+=e.lastVirtualXOffset||0,a=a||0,a+=e.lastVirtualYOffset||0;e.isZoomed&&e.virtualXOffset>i&&e.virtualXOffset+e.virtualXPos<0&&e.virtualXOffset+e.virtualXPos+e.virtualWidth<s-80?i=e.virtualXOffset:e.isZoomed&&e.virtualXOffset<i&&80<e.virtualXOffset+e.virtualXPos&&e.virtualXOffset+e.virtualXPos+e.virtualWidth>s&&(i=e.virtualXOffset),e.isZoomed&&e.virtualYOffset>a&&e.virtualYOffset+e.virtualYPos<0&&e.virtualYOffset+e.virtualYPos+e.virtualHeight<f-80?a=e.virtualYOffset:e.isZoomed&&e.virtualYOffset<a&&80<e.virtualYOffset+e.virtualYPos&&e.virtualYOffset+e.virtualYPos+e.virtualHeight>f&&(a=e.virtualYOffset),o="translate("+i+"px,"+a+"px) scale("+t+")",void 0!==e.domObject&&(e.scale=t,e.virtualXOffset=i,e.virtualYOffset=a,e.virtualWidth=e.width*t,e.virtualHeight=e.height*t,e.virtualXPos=e.xPos+(e.width-e.virtualWidth)/2,e.virtualYPos=e.yPos+(e.height-e.virtualHeight)/2)}else o="translate("+e.virtualXOffset+"px,"+e.virtualYOffset+"px) scale("+e.scale+")";void 0!==e.domObject&&void 0!==e.domObject.style?(e.domObject.style.webkitTransform=o,e.domObject.style.MozTransform=o,e.domObject.style.msTransform=o,e.domObject.style.OTransform=o,e.domObject.style.transform=o):void 0!==e.style&&(e.style.webkitTransform=o,e.style.MozTransform=o,e.style.msTransform=o,e.style.OTransform=o,e.style.transform=o),void 0!==n&&(void 0!==e.domObject?e.domObject.style.opacity=n:e.style.opacity=n)},H=function(e){var t,i=[],a=F(e),n=document.getElementsByClassName("js-mediaSwipe"),o=document.getElementsByClassName("js-mediaswipe");m=new Array;var s=new Array;if(u=0,n.length)for(var d=0;d<n.length;d++)t=F(n[d]),(!1===a&&!1!==t&&void 0===i[t.src]||!1!==t&&void 0===i[t.src]&&t.category===a.category)&&(i[t.src]=!0,t.index=m.length,t.displayIndex=m.length+1,m.push(t),s.push(t),0===u&&t.src===a.src&&(u=m.length-1));if(o.length)for(d=0;d<o.length;d++)t=F(o[d]),(!1===a&&!1!==t&&void 0===i[t.src]||!1!==t&&void 0===i[t.src]&&t.category===a.category)&&(i[t.src]=!0,t.index=m.length,t.displayIndex=m.length+1,m.push(t),s.push(t),0===u&&t.src===a.src&&(u=m.length-1));if(2===m.length){var r=m.length,l=1;if(n.length)for(d=0;d<n.length&&(t=F(n[d]),(!1===a&&!1!==t||!1!==t&&t.category===a.category)&&(t.index=r,t.displayIndex=l,m.push(t),r++,l++),4!=m.length);d++);if(o.length)for(d=0;d<o.length&&(t=F(n[d]),(!1===a&&!1!==t||!1!==t&&t.category===a.category)&&(t.index=r,t.displayIndex=l,m.push(t),r++,l++),4!=m.length);d++);c=2}else c=m.length},W=function(e,t){j.animations.length&&(a(u),ee());var i=e<0?y:b;O=i,u=D(e),j.animations.push({domObject:v,time:270,xStart:t,xEnd:s*e*-1,callback:function(){a(u),ee()}}),j.animations.push({domObject:i,time:270,xStart:t,xEnd:s*e*-1})},F=function(e){var t="",i="",a={active:!1,index:0,type:!1,src:!1,caption:!1,category:!1,width:0,height:0,fullscreen:!1,xPos:0,yPos:0,scale:1,minScale:1,isZoomed:!1,disableTouchpad:!1,disableSwipe:!1,virtualHeight:0,virtualWidth:0,virtualXPos:0,virtualYPos:0,virtualXOffset:0,virtualYOffset:0,lastVirtualXOffset:0,lastVirtualYOffset:0,domSlide:!1,domContainer:!1,domObject:!1,html:"",animate:!1,closeInFrame:!1,addClass:!1};if(void 0!==e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;n++)t=e.attributes[n].nodeName,i=e.getAttribute(t),"data-fullscreen"!==t&&"data-fullScreen"!==t||"true"!==i?"data-largeimg"===t||"data-img"===t||"data-image"===t||"href"===t||"data-largeImg"===t||"data-largeImage"===t?a.src=i:"title"===t||"data-caption"===t||"data-title"===t||"data-description"===t?a.caption=i:"data-rel"===t||"data-category"===t||"data-type"===t?a.category=i:"data-w"!==t&&"data-width"!==t||isNaN(i)?"data-h"!==t&&"data-height"!==t||isNaN(i)?"data-addClass"===t||"data-addclass"===t?a.addClass=i:"data-animate"===t?a.animate=i:"data-closeinframe"===t||"data-closeinframe"===t?a.closeInFrame=!0:"data-html"===t&&(a.type="html",a.src=document.getElementById(i)):a.height=parseInt(i):a.width=parseInt(i):a.fullscreen=!0;else for(var o in e)void 0!==a[o]&&(a[o]=e[o]);if(!1!==a.src&&""!==a.src&&"html"!==a.type){if(/\.(jpg|png|gif)/.test(a.src.toLowerCase())&&void 0===a.mmid)a.type="image";else if(/\.(mp4)/.test(a.src.toLowerCase()))a.type="mp4";else if(-1<a.src.indexOf("vimeo.com"))a.type="iframe",a.disableTouchpad=!0,a.width=a.width||1200,a.height=a.height||675;else if(-1<a.src.indexOf("youtube.com")||-1<a.src.indexOf("/embed/")&&-1<a.src.indexOf("yout")){a.type="youtube",a.disableTouchpad=!0,a.width=a.width||1200,a.height=a.height||675;var s=a.src.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/);if(!s||11!=s[2].length)return!1;a.src=s[2]}else a.type="iframe",a.disableTouchpad=!0,a.disableSwipe=!0,a.width=a.width||3e3,a.height=a.height||2008;return a}return"html"===a.type?(a.disableTouchpad=!0,a.disableSwipe=!0,a.width=a.width||920,a.height=a.height||614,a):(console.warn("MediaSwipe: Could not open file because 'href' or 'data-image' attributes were not specified on the js-mediaSwipe element."),!1)},D=function(e){var t=u+e;return t>=m.length?0:t<0?m.length-1:t},V=function(e,t){e.className=e.className.replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ")+" "+t},q=function(e,t){e.className=e.className.replace(new RegExp(t,"g"),"").replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ")},Z=function(e,t){for(var i=e.className.replace(/^\s\s*/g,"").replace(/\s\s*$/g,"").replace(/\s\s+/g," ").split(" "),a=0;a<i.length;a++)if(i[a]===t)return!0;return!1},U=function(){var e=document.createElement("div");e.id="mediaswipe-container";e.innerHTML='<div id="mediaswipe-touchpad" class="mediaswipe-slides-container"><div id="mediaswipe-slide1" class="mediaswipe-slide mediaswipe-current-slide"><div id="mediaswipe-slide1-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div></div><div id="mediaswipe-slide2" class="mediaswipe-slide mediaswipe-previous-slide"><div id="mediaswipe-slide2-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div></div><div id="mediaswipe-slide3" class="mediaswipe-slide mediaswipe-next-slide"><div id="mediaswipe-slide3-container" class="mediaswipe-slide-container mediaswipe-op-transition"></div></div><div class="mediaswipe-invisible-overlay"></div></div><div class="mediaswipe-top-bar"><div id="mediaswipe-gallery-indexes"></div><button type="button" id="mediaswipe-share-button" class="mediaswipe-share-button mediaswipe-op-transition" title="Share"><span></span></button><button type="button" id="mediaswipe-fullscreen-button" class="mediaswipe-fullscreen-button mediaswipe-op-transition"><span></span></button><button type="button" id="mediaswipe-close-button" class="mediaswipe-close-button mediaswipe-op-transition"></button><div id="mediaswipe-share-nav"><button type="button" id="mediaswipe-facebook-share" class="mediaswipe-op-transition">Share on Facebook</button><button type="button" id="mediaswipe-twitter-share" class="mediaswipe-op-transition">Tweet</button><button type="button" id="mediaswipe-pinterest-share" class="mediaswipe-op-transition">Pin it</button></div></div><div class="mediaswipe-bottom-bar"><div id="mediaswipe-slide-caption"></div></div><button type="button" id="mediaswipe-left-arrow" class="mediaswipe-arrow mediaswipe-left-arrow mediaswipe-all-transition"><span></span></button><button type="button" id="mediaswipe-right-arrow" class="mediaswipe-arrow mediaswipe-right-arrow mediaswipe-all-transition"><span></span></button><div class="mediaswipe-overlay mediaswipe-op-transition"></div>',document.getElementsByTagName("body")[0].appendChild(e)},$=function(){document.addEventListener("click",function(e){if(!1===d&&void 0!==e.button&&e.button<2||!1===d&&void 0===e.button)for(var t=e.target;t.parentNode&&(a=e,!(i=t).getAttribute("class")||void 0===i.getAttribute("class")||-1===i.getAttribute("class").toLowerCase().indexOf("js-mediaswipe")||(a.preventDefault(),H(i),P(),0));)t=t.parentNode;var i,a}),document.addEventListener("mouseout",function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||!C.mouseDown||_(e)}),h.addEventListener("mouseout",function(e){(C.swiping||C.panning)&&(e=e||window.event,_(e))}),h.addEventListener("touchstart",function(e){e=e||window.event,d&&"image"===m[u].type&&e.preventDefault();var t=J(e);(d&&!1===m[u].disableSwipe&&t||d&&!t)&&(1===e.targetTouches.length?n(e.targetTouches[0]):(C.zooming=!1,n(e.targetTouches[0]),K(e.targetTouches[1],C.secondStart)))}),h.addEventListener("touchmove",function(e){e=e||window.event,d&&"image"===m[u].type&&e.preventDefault();var t=J(e);if(d&&!1===m[u].disableSwipe&&t||d&&!t)if(1!==e.targetTouches.length||C.zooming){if(1<=e.targetTouches.length&&!1===m[u].disableTouchpad){!0!==C.zooming&&(K(e.targetTouches[0],C.start),C.zooming=!0,m[u].startZoomWidth=m[u].virtualWidth,m[u].isZoomed=!0,m[u].lastVirtualXOffset=m[u].virtualXOffset,m[u].lastVirtualYOffset=m[u].virtualYOffset),K(e.targetTouches[0],C.end),K(e.targetTouches[1],C.secondEnd);var i=Math.sqrt(Math.pow(C.secondStart.y-C.start.y,2)+Math.pow(C.secondStart.x-C.start.x,2)),a=Math.sqrt(Math.pow(C.secondEnd.y-C.end.y,2)+Math.pow(C.secondEnd.x-C.end.x,2)),n=C.secondEnd.x-C.secondStart.x+(C.end.x-C.start.x)/2,o=C.secondEnd.y-C.secondEnd.y+(C.end.y-C.start.y)/2,s=(4*(a-i)+m[u].startZoomWidth)/m[u].width;N(m[u],s,n,o)}}else G(e.targetTouches[0])}),h.addEventListener("touchend",function(e){e=e||window.event,d&&"image"===m[u].type&&e.preventDefault();var t=J(e);if(d&&!1===m[u].disableSwipe&&t||d&&!t)if(0===e.targetTouches.length&&!1===C.zooming)_(e.changedTouches[0]);else if(0===e.targetTouches.length&&C.zooming){if(C.zooming=!1,m[u].scale==m[u].minScale){var i=B(m[u]);m[u].lastVirtualXOffset=0,m[u].lastVirtualYOffset=0,j.animations.push({domObject:m[u],time:100,scaleStart:m[u].scale,scaleEnd:i.scale,xStart:m[u].virtualXOffset,xEnd:0,yStart:m[u].virtualYOffset,yEnd:0,callback:function(){ee(),q(p,"ms-zoom-out"),V(p,"ms-zoom-in"),m[u].isZoomed=!1}})}}else 1===e.targetTouches.length&&C.zooming&&(n(e.targetTouches[0]),m[u].lastVirtualXOffset=m[u].virtualXOffset,m[u].lastVirtualYOffset=m[u].virtualYOffset)}),h.addEventListener("mousedown",function(e){e=e||window.event,n(e)}),h.addEventListener("mouseup",function(e){e=e||window.event,_(e)}),h.addEventListener("mousemove",function(e){e=e||window.event,G(e)}),document.getElementById("mediaswipe-close-button").addEventListener("click",function(e){(e=e||window.event).preventDefault(),X()}),document.getElementById("mediaswipe-fullscreen-button").addEventListener("click",function(e){(e=e||window.event).preventDefault(),Z(p,"ms-full-screen")?t():function(){!0,V(p,"ms-full-screen");var e=document.body,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}}()}),document.getElementById("mediaswipe-share-button").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=document.getElementById("mediaswipe-share-nav");Z(t,"on")?q(t,"on"):V(t,"on")}),document.getElementById("mediaswipe-facebook-share").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=m[u].domObject.src,i=m[u].caption||"";return window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(t)+"&t="+encodeURIComponent(i),"sharer","toolbar=0,status=0,width=626,height=436"),q(document.getElementById("mediaswipe-share-nav"),"on"),!1}),document.getElementById("mediaswipe-twitter-share").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=m[u].domObject.src,i=m[u].caption||"";return window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(i)+"&url="+encodeURIComponent(t),"sharer","toolbar=0,status=0,width=626,height=436"),q(document.getElementById("mediaswipe-share-nav"),"on"),!1}),document.getElementById("mediaswipe-pinterest-share").addEventListener("click",function(e){(e=e||window.event).preventDefault();var t=m[u].domObject.src,i=m[u].caption||"";return window.open("http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(t)+"&description="+encodeURIComponent(i),"sharer","toolbar=0,status=0,width=626,height=436"),q(document.getElementById("mediaswipe-share-nav"),"on"),!1}),document.getElementById("mediaswipe-left-arrow").addEventListener("click",function(e){(e=e||window.event).preventDefault(),d&&1<c&&W(-1,0)}),document.getElementById("mediaswipe-right-arrow").addEventListener("click",function(e){(e=e||window.event).preventDefault(),d&&1<c&&W(1,0)}),document.onkeydown=function(e){if(d)switch((e=e||window.event).which||e.keyCode){case 39:1<c&&W(1,0);break;case 37:1<c&&W(-1,0);break;case 27:X()}},window.addEventListener("resize",function(){e()})},e=function(){if(s=window.innerWidth,f=window.innerHeight,d){for(var e=D(-1),t=D(1),i=[u,e,t],a=0;a<i.length&&(z(m[i[a]]),!(m.length<2));a++);"siteplan"===m[u].type&&void 0!==window.toll.sitePlan&&R(m[u])}},K=function(e,t){t.x=e.clientX,t.y=e.clientY,t.time=parseInt((new Date).getTime())},n=function(e){var t=J(e);d&&(!1===m[u].disableSwipe&&t||!t)&&(K(e,C.start),C.mouseDown=!0)},_=function(e){var t=J(e);if(d&&(!1===m[u].disableSwipe&&t||!t||t&&C.mouseDown))if(C.mouseDown=!1,K(e,C.end),C.swiping){var i=C.end.x-C.start.x;if(100<Math.abs(i)){W(0<i?-1:1,i)}else{var a=0<i?y:b;j.animations.push({domObject:v,time:270,xStart:i,xEnd:0,callback:function(){ee(),q(p,"ms-grabbing"),q(p,"ms-grab")}}),j.animations.push({domObject:a,time:270,xStart:i,xEnd:0})}C.swiping=!1}else if(C.panning){if(C.panning=!1,q(p,"ms-grabbing"),V(p,"ms-zoom-inom-out"),25<Math.abs(C.vX)&&1<m.length){C.panning=!1;i=C.end.x-C.start.x;if(100<Math.abs(i)){W(0<i?-1:1,i)}else{a=0<i?y:b;j.animations.push({domObject:v,time:270,xStart:i,xEnd:0,callback:function(){ee(),q(p,"ms-grabbing"),q(p,"ms-grab")}}),j.animations.push({domObject:a,time:270,xStart:i,xEnd:0})}}else(8<Math.abs(C.vX)||8<Math.abs(C.vY))&&j.animations.push({domObject:m[u],time:330,xStart:0,xEnd:6*C.vX,yStart:0,yEnd:6*C.vY,callback:function(){ee(),q(p,"ms-grabbing"),q(p,"ms-grab"),m[u].lastVirtualXOffset=m[u].virtualXOffset,m[u].lastVirtualYOffset=m[u].virtualYOffset}});m[u].lastVirtualXOffset=m[u].virtualXOffset,m[u].lastVirtualYOffset=m[u].virtualYOffset}else{t=J(e);var n=document.getElementById("mediaswipe-share-nav");if(Z(n,"on")&&(q(n,"on"),!t))return!1;if(t||X(),t&&void 0!==m[u].youTubeObject&&1!==m[u].youTubeObject.getPlayerState()&&(V(p,"disable-touchpad"),m[u].youTubeObject.playVideo(),"undefined"!=typeof dataLayer&&void 0!==dataLayer.push&&void 0!==m[u].eventName&&""!=typeof m[u].eventName&&dataLayer.push({event:m[u].eventName})),t&&m[u].scale<1&&!1===m[u].isZoomed&&!1===m[u].disableTouchpad&&j.animations.push({domObject:m[u],time:170,scaleStart:m[u].scale,scaleEnd:1,callback:function(){ee(),q(p,"ms-zoom-in"),V(p,"ms-zoom-out"),m[u].isZoomed=!0}}),t&&!0===m[u].isZoomed){var o=B(m[u]);m[u].lastVirtualXOffset=0,m[u].lastVirtualYOffset=0,j.animations.push({domObject:m[u],time:170,scaleStart:m[u].scale,scaleEnd:o.scale,xStart:m[u].virtualXOffset,xEnd:0,yStart:m[u].virtualYOffset,yEnd:0,callback:function(){ee(),q(p,"ms-zoom-out"),V(p,"ms-zoom-in"),m[u].isZoomed=!1}})}}},G=function(e){var t=J(e);if(d&&(!1===m[u].disableSwipe&&t||!t||t&&C.mouseDown))if(C.mouseDown){if(10<Math.sqrt(Math.pow(e.clientY-C.start.y,2)+Math.pow(e.clientX-C.start.x,2)))if(1<m.length&&!1===C.swiping&&!1===m[u].isZoomed?C.swiping=!0:!0===m[u].isZoomed&&(C.panning=!0),C.swiping)L(e.clientX-C.start.x),Z(p,"ms-grab")&&q(p,"ms-grab"),Z(p,"ms-grabbing")||V(p,"ms-grabbing");else if(C.panning){var i={x:0,y:0,time:-1};K(e,i),C.vX=i.x-C.lastPosition.x,C.vY=i.y-C.lastPosition.y,C.lastPosition=i,N(m[u],!1,i.x-C.start.x,i.y-C.start.y),Z(p,"ms-zoom-out")&&q(p,"ms-zoom-out"),Z(p,"ms-grabbing")||V(p,"ms-grabbing")}}else(t=J(e))?m[u].scale<1&&!1===m[u].disableTouchpad&&!Z(p,"ms-zoom-in")?V(p,"ms-zoom-in"):1<=m[u].scale&&!1===m[u].disableTouchpad&&m[u].isZoomed&&!Z(p,"ms-zoom-out")?V(p,"ms-zoom-out"):1<c&&1===m[u].scale&&!m[u].disableTouchpad&&!m[u].isZoomed&&!Z(p,"ms-grab")&&V(p,"ms-grab"):(Z(p,"ms-zoom-in")&&q(p,"ms-zoom-in"),Z(p,"ms-zoom-out")&&q(p,"ms-zoom-out"),Z(p,"ms-grab")&&q(p,"ms-grab"))},J=function(e){var t={x:0,y:0,time:0};return"OPTION"==e.target.tagName.toUpperCase()||"SELECT"==e.target.tagName.toUpperCase()||(K(e,t),t.x>=m[u].virtualXPos+m[u].virtualXOffset&&t.x<=m[u].virtualXPos+m[u].virtualXOffset+m[u].virtualWidth&&t.y>=m[u].virtualYPos+m[u].virtualYOffset&&t.y<=m[u].virtualYPos+m[u].virtualYOffset+m[u].virtualHeight)},Q=function(){return parseInt((new Date).getTime())},ee=function(){j.animations=new Array},te=function(){j.currentTime=Q(),j.deltaTime=j.currentTime-j.previousTime;for(var e=0;e<j.animations.length;e++)if(void 0===j.animations[e].animating&&(j.animations[e].animating=!0),j.animations[e].animating){j.foundAnimation=!0,void 0===j.animations[e].deltaTime&&(j.animations[e].deltaTime=0),void 0===j.animations[e].scaleStart&&(j.animations[e].scaleStart=!1,j.animations[e].scaleEnd=!1),void 0===j.animations[e].xStart&&(j.animations[e].xStart=!1,j.animations[e].xEnd=!1),void 0===j.animations[e].yStart&&(j.animations[e].yStart=!1,j.animations[e].yEnd=!1),void 0===j.animations[e].opacityStart&&(j.animations[e].opacityStart=!1,j.animations[e].opacityEnd=!1);var t,i,a,n;j.animations[e].deltaTime,j.animations[e].time;j.animations[e].deltaTime>j.animations[e].time?(j.animations[e].animating=!1,t=!1!==j.animations[e].scaleStart&&j.animations[e].scaleEnd,i=!1!==j.animations[e].xStart&&j.animations[e].xEnd,a=!1!==j.animations[e].yStart&&j.animations[e].yEnd,n=!1!==j.animations[e].opacityStart&&j.animations[e].opacityEnd):(t=!1!==j.animations[e].scaleStart&&ae(j.animations[e].deltaTime,j.animations[e].scaleStart,j.animations[e].scaleEnd-j.animations[e].scaleStart,j.animations[e].time),i=!1!==j.animations[e].xStart&&ae(j.animations[e].deltaTime,j.animations[e].xStart,j.animations[e].xEnd-j.animations[e].xStart,j.animations[e].time),a=!1!==j.animations[e].yStart&&ae(j.animations[e].deltaTime,j.animations[e].yStart,j.animations[e].yEnd-j.animations[e].yStart,j.animations[e].time),n=!1!==j.animations[e].opacityStart&&ae(j.animations[e].deltaTime,j.animations[e].opacityStart,j.animations[e].opacityEnd-j.animations[e].opacityStart,j.animations[e].time)),N(j.animations[e].domObject,t,i,a,n),j.animations[e].deltaTime>j.animations[e].time&&void 0!==j.animations[e].callback?j.animations[e].callback():j.animations[e].deltaTime+=j.deltaTime}j.previousTime=j.currentTime,j.foundAnimation=!1,ie()},ie=function(){window.requestAnimationFrame?window.requestAnimationFrame(te):window.msRequestAnimationFrame?window.msRequestAnimationFrame(te):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(te):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(te):window.oRequestAnimationFrame?window.oRequestAnimationFrame(te):void 0===window.requestNextFrame&&(window.requestNextFrame=setInterval(function(){te()},18))},ae=function(e,t,i,a){return-i*(e/=a)*(e-2)+t};return{init:function(){if(s=window.innerWidth,f=window.innerHeight,d=!1,l=[],[],loadedCommunityIds=[],!1,(p=document.getElementById("mediaswipe-container"))||(U(),p=document.getElementById("mediaswipe-container")),h=document.getElementById("mediaswipe-touchpad"),v=document.getElementById("mediaswipe-slide1"),w=document.getElementById("mediaswipe-slide1-container"),y=document.getElementById("mediaswipe-slide2"),g=document.getElementById("mediaswipe-slide2-container"),b=document.getElementById("mediaswipe-slide3"),x=document.getElementById("mediaswipe-slide3-container"),O=!1,S=document.getElementById("mediaswipe-gallery-indexes"),E=document.getElementById("mediaswipe-slide-caption"),T=document.getElementById("mediaswipe-close-button"),j={currentTime:0,previousTime:Q(),deltaTime:0,animations:[],foundAnimation:!1},C={vX:0,vY:0,start:{x:0,y:0,time:-1},end:{x:0,y:0,time:-1},secondStart:{x:0,y:0,time:-1},secondEnd:{x:0,y:0,time:-1},lastPosition:{x:0,y:0,time:-1},mouseDown:!1,swiping:!1,panning:!1,zooming:!1},$(),te(),I=!0,void 0!==r)Y(r);else if(window.location&&window.location.hash&&0<window.location.hash.length&&/\#view\=([\w\d])*(\,[\w\d])*/.test(window.location.hash)){var e,t=0,i=window.location.hash.replace("#view=","").split(",");e=i[0],2!==i.length||""===i[1]||isNaN(i[1])||(t=parseInt(i[1]));for(var a=document.getElementsByClassName("js-mediaSwipe"),n=-1,o=0;o<a.length;o++)if((void 0!==a[o].getAttribute("data-rel")&&a[o].getAttribute("data-rel")===e||""===e)&&++n===t){H(a[o]),P();break}n<0&&console.warn("MediaSwipe: Could not find gallery or image in the fragment identifier.")}},youTubeAPIReady:function(){for(var e=0;e<l.length;e++)"youtube"===l[e].type&&k(l[e])},open:function(e){!1===I?r=e:Y(e)},close:function(){d&&(Z(p,"ms-full-screen")&&t(),X())}}}(),function(e,t){e=e||"docReady",t=t||window;var i=[],a=!1,n=!1;function o(){if(!a){a=!0;for(var e=0;e<i.length;e++)i[e].fn.call(window,i[e].ctx);i=[]}}function s(){"complete"===document.readyState&&o()}t[e]=function(e,t){if("function"!=typeof e)throw new TypeError("callback for docReady(fn) must be a function");a?setTimeout(function(){e(t)},1):(i.push({fn:e,ctx:t}),"complete"===document.readyState?setTimeout(o,1):n||(document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",o)),n=!0))}}("docReady",window),void 0!==window.onYouTubeIframeAPIReady&&(MSoldYouTubeIframeAPIReady=window.onYouTubeIframeAPIReady),window.onYouTubeIframeAPIReady=function(){mediaswipe.youTubeAPIReady(),"function"==typeof MSoldYouTubeIframeAPIReady&&MSoldYouTubeIframeAPIReady()},docReady(function(){mediaswipe.init()});